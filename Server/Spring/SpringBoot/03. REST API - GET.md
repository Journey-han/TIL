# 03. GET API

|  | ì˜ë¯¸ | CRUD | ë©±ë“±ì„± | ì•ˆì •ì„± | Path Variable | Query Parameter | DataBody |
| :---: | :---: | :---: | :---: | :---: | :---: | :---: | :---: |
| GET | ë¦¬ì†ŒìŠ¤ ì·¨ë“ | R | O | X | O | O | X |
| POST | ë¦¬ì†ŒìŠ¤ ìƒì„±, ì¶”ê°€ | C | X | X | O |  | O |
| PUT | ë¦¬ì†ŒìŠ¤ ê°±ì‹ , ìƒì„± | C / U | O | X | O |  | O |
| DELETE | ë¦¬ì†ìŠ¤ ì‚­ì œ | D | O | X | O | O | X |
| HEAD | í—¤ë” ë°ì´í„° ì·¨ë“ | - | O | O | - | - | - |
| OPTIONS | ì§€ì›í•˜ëŠ” ë©”ì†Œë“œ ì·¨ë“ | - | O | - | - | - | - |
| TRACE | ìš”ì²­ë©”ì„¸ì§€ ë°˜í™˜ | - | O | - | - | - | - |
| CONNECT | í”„ë¡ì‹œ ë™ì‘ì˜ í„°ë„ ì ‘ì†ìœ¼ë¡œ ë³€ê²½  | - | X | - | - | - | - |

## ê¸°ë³¸ êµ¬ì„±

```java
import org.springframework.web.bind.annotation.*;

@RestController
@RequestMapping("/api/get")
public class GetApiController {

    @GetMapping(path = "/hello")    // http://localhost:8080/api/get/hello
    public String getHello() {
        return "get Hello";
    }
}
```

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-01-23 á„‹á…©á„’á…® 11.02.25.png](https://t1.daumcdn.net/cafeattach/1Dzpp/e7b615bafd29a6244d15a8d5f5c2fd8b7bb95af6)

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-01-23 á„‹á…©á„’á…® 11.02.32.png](https://t1.daumcdn.net/cafeattach/1Dzpp/09cb2fe253be308f932e74d3cf7b9fe819128ac6)

## RequestMapping ë©”ì„œë“œ

- RequestMapping =  get / post / put / delete    ëª¨ë‘ ì‚¬ìš© ê°€ëŠ¥í•œ ë§¤í•‘ ë°©ì‹.
- `method = "RequestMethod.GET"` ë¡œ ì–´ë–¤ ë©”í•‘ì¸ì§€ íŒë³„í•˜ê¸°. http://localhost:8080/api/get/hi

```java
@RestController
@RequestMapping("/api/get")
public class GetApiController {

    @RequestMapping(path = "/hi", method = RequestMethod.GET)    
    public String hi() {
        return "hi";
    }
}
```

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-01-23 á„‹á…©á„’á…® 11.04.21.png](https://t1.daumcdn.net/cafeattach/1Dzpp/c34b740fe1ab43fb77f5a3bd49a01b29628fbb28)

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-01-23 á„‹á…©á„’á…® 11.04.29.png](https://t1.daumcdn.net/cafeattach/1Dzpp/a8cfa23a9e64236d921a13f3e9fe19919f4d3705)

## Path Variable

- http://localhost:8080/api/get/path-variable/{name}   ë³€í™”í•˜ëŠ” ê°’ì„ ë°›ì„ ìˆ˜ ìˆë‹¤
- http://localhost:8080/api/get/path-variable/{spirng-bbot}

- `"/path-variable/{name}"` íŒŒë¼ë¯¸í„°ì˜ ë³€ìˆ˜ ì´ë¦„ê³¼ ë§¤í•‘ì˜ {name}ê³¼ ê°™ì•„ì•¼ í•œë‹¤.
- `@PathVariable String name` íŒŒë¼ë¯¸í„°ë¡œ nameì´ë¼ëŠ” ë³€ìˆ˜ë¥¼ ë°›ëŠ”ë‹¤.

```java
@RestController
@RequestMapping("/api/get")
public class GetApiController {

		@GetMapping("/path-variable/{name}")       
    public String pathVariable(@PathVariable String name) {     
        System.out.println("PathVariable : " + name);
        return name;
    }
}
```

- `@PathVariable(name = "name")` ë§¤í•‘ë˜ëŠ” ì†ì„±ê³¼ íŒŒë¼ë¯¸í„°ì˜ ë³€ìˆ˜ì™€ ì´ë¦„ì´ ê°™ì•„ì•¼ í•˜ë‚˜ íŒŒë¼ë¯¸í„°ì˜ ë³€ìˆ˜ì˜ ì´ë¦„ì„ ë‹¤ë¥´ê²Œ ì„¤ì •í•´ì•¼ í•  ë•Œ ì“´ë‹¤.

```java
@RestController
@RequestMapping("/api/get")
public class GetApiController {

    @GetMapping("/path-variable/{name}")
    public String pathVariable(@PathVariable(name = "name") String pathName) {
        System.out.println("PathVariable : " + pathName);
        return pathName;
    }
}
```

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-01-23 á„‹á…©á„’á…® 11.08.16.png](https://t1.daumcdn.net/cafeattach/1Dzpp/c0e5daa9cba4c1bca12b01aed8fb7ccd75a4d5fa)

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-01-23 á„‹á…©á„’á…® 11.08.24.png](https://t1.daumcdn.net/cafeattach/1Dzpp/dc88a47354187e70dcb837fc232485ecb409ec38)

## Query Parm

- **ì¿¼ë¦¬íŒŒë¼ë¯¸í„°** : ê²€ìƒ‰ ì‹œ ì—¬ëŸ¬ê°€ì§€ ë§¤ê°œë³€ìˆ˜ ì¸ì. ì£¼ì†Œì˜ ? ì´í›„ë¥¼ ì¿¼ë¦¬íŒŒë¼ë¯¸í„°ë¼ê³ í•œë‹¤.
- `?key=value&key2=value2` í˜•íƒœë¡œ ë˜ì–´ìˆë‹¤.

```java
/search?q=intellij&source=hp&ei=9WLtYbOTAYW7wAPDjp74AQ&iflsig=ALs-wAMAAAAAYe1xBXOicLJ2-viqzOlYHRqMFG1JPezg&oq=intell&gs_lcp=Cgdnd3Mtd...AQA&sclient=gws-wiz
```

### 1. ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ë¥¼ Mapìœ¼ë¡œ ë°›ê¸°

```java
import org.springframework.web.bind.annotation.*;

import java.util.Map;

@RestController
@RequestMapping("/api/get")
public class GetApiController {
		
		// http://localhost:8080/api/get/query-param?user=zzangu&email=zzang@gmail.com&age=5
    @GetMapping(path = "query-param")
    public String queryParam(@RequestParam Map<String, String> queryParam) {
        StringBuilder sb = new StringBuilder();

        queryParam.entrySet().forEach(entry -> {
            System.out.println(entry.getKey());
            System.out.println(entry.getValue());
            System.out.println("\n");

            sb.append(entry.getKey() + " = " + entry.getValue() + "\n");
        });

        return sb.toString();
    }
}
```

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-01-23 á„‹á…©á„’á…® 11.11.50.png](https://t1.daumcdn.net/cafeattach/1Dzpp/ad0a4f3cc4c97b1e0e32ce12419868884976ada8)

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-01-23 á„‹á…©á„’á…® 11.11.58.png](https://t1.daumcdn.net/cafeattach/1Dzpp/17f16ec1326a00f123b7edd4aeea6a60976a66ad)

### 2. ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ë¥¼ ëª…ì‹œì ìœ¼ë¡œ ë°›ê¸°

```java
@RestController
@RequestMapping("/api/get")
public class GetApiController {

		@GetMapping("query-param02")
    public String queryParam02(
            @RequestParam String name,
            @RequestParam String email,
            @RequestParam int age
    ){
        System.out.println(name);
        System.out.println(email);
        System.out.println(age);

        return name + " " + email + " " + age;
    }

}
```

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-01-23 á„‹á…©á„’á…® 11.17.32.png](https://t1.daumcdn.net/cafeattach/1Dzpp/561ebfc2aa2b242e9c1137d5e2e510d3bbd902a7)

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-01-23 á„‹á…©á„’á…® 11.17.41.png](https://t1.daumcdn.net/cafeattach/1Dzpp/b1a104cf5fde5a55ddebe02fc24905be920ccff8)

**ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ì— ì˜ëª»ëœ ìë£Œí˜•ì´ ë“¤ì–´ê°ˆ ê²½ìš°**

- 400 ì—ëŸ¬ í´ë¼ì´ì–¸íŠ¸ ì‹¤ìˆ˜. íŒŒë¼ë¯¸í„°ë¥¼ intë¡œ ë°›ê¸°ë¡œ ë˜ì–´ìˆëŠ”ë° ë¬¸ìì—´ì´ ë“¤ì–´ê°”ë‹¤.

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-01-23 á„‹á…©á„’á…® 10.39.59.png](https://t1.daumcdn.net/cafeattach/1Dzpp/e6499b196c40482cd7e3596c1ebc462574f026d4)

- ìŠ¤í”„ë§ ë¶€íŠ¸ ì½˜ì†”

```java
2022-01-23 22:39:05.719  WARN 4850 --- [nio-8080-exec-3] .w.s.m.s.DefaultHandlerExceptionResolver : Resolved [org.springframework.web.method.annotation.MethodArgumentTypeMismatchException: Failed to convert value of type 'java.lang.String' to required type 'int'; nested exception is java.lang.NumberFormatException: For input string: "5ì‚´"]
```

> ğŸ’¡ íŒŒëŒì´ mapìœ¼ë¡œ ë“¤ì–´ì˜¬ ë• ì–´ë–¤ê²Œ ë“¤ì–´ì˜¬ì§€ ëª¨ë¥¸ë‹¤. ê·¸ë˜ì„œ ëª¨ë“  í‚¤ë¥¼ ë°›ì„ ìˆ˜ ìˆë‹¤. ëª…ì‹œì ìœ¼ë¡œ íŒŒëŒì„ ë°›ëŠ” ê²½ìš°ì— ì‚¬ìš©í•œë‹¤.

### 3. ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ë¥¼ ê°ì²´ë¡œ ë°›ê¸°

- íŒŒë¼ë¯¸í„°ì— ê°ì²´ê°€ ë“¤ì–´ì˜¬ ê²½ìš° `@RequestParam`ì–´ë…¸í…Œì´ì…˜ì€ ë¶™ì´ì§€ ì•ŠëŠ”ë‹¤.
- ì¿¼ë¦¬íŒŒë¼ë¯¸í„°(? ë’¤ì˜ ì£¼ì†Œ)ì˜ ì£¼ì†Œë¥¼ **ìŠ¤í”„ë§ ë¶€íŠ¸ê°€ íŒë‹¨**í•œë‹¤.
- `?user=zzangu&email=zzang@gmail.com&age=5` í‚¤(ë³€ìˆ˜)ì— í•´ë‹¹í•˜ëŠ” ë³€ìˆ˜ì˜ ì´ë¦„ì„ í•´ë‹¹ ê°ì²´ì—ì„œ ë³€ìˆ˜ì™€ ì´ë¦„ì„ ë§¤ì¹­í•œë‹¤.

```java
public class UserRequest {

    private String name;
    private String email;
    private int age;

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getEmail() {
        return email;
    }

    public void setEmail(String email) {
        this.email = email;
    }

    public int getAge() {
        return age;
    }

    public void setAge(int age) {
        this.age = age;
    }

    @Override
    public String toString() {
        return "UserRequest{" +
                "name='" + name + '\'' +
                ", email='" + email + '\'' +
                ", age=" + age +
                '}';
    }
}
```

```java
import com.example.hello.dto.UserRequest;
import org.springframework.web.bind.annotation.*;

@RestController
@RequestMapping("/api/get")
public class GetApiController {

		@GetMapping("query-param03")
    public String queryParam02(UserRequest userRequest){
        System.out.println(userRequest.getName());
        System.out.println(userRequest.getEmail());
        System.out.println(userRequest.getAge());

        return userRequest.toString();
    }

}
```

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-01-23 á„‹á…©á„’á…® 11.22.23.png](https://t1.daumcdn.net/cafeattach/1Dzpp/eb69660156af0a14971720e87b2841e16f29d725)

![á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º 2022-01-23 á„‹á…©á„’á…® 11.22.30.png](https://t1.daumcdn.net/cafeattach/1Dzpp/ce01fc4c7387497352347e263ebff4bf71c91de0)